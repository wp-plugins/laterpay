// time passes
.lp_timePass
    color                   $text /* make sure, the text is not white by default */
    display                 inline-block
    font-family             Arial, sans-serif                                                       !important
    font-size               $fs-1                                                                   !important
    font-weight             400                                                                     !important
    margin-right            $fs-1
    margin-bottom           $fs-1

.lp_timePass,
.lp_timePass__front,
.lp_timePass__back
    height                  154px
    width                   308px

/**
 * Time pass preview, rendered like a real-world ticket
 *
 * 1. Allow child elements (e.g. the purchase button) to be positioned at the bottom of the pass
 * 2. Avoid padding to be added to height and width
 */
.lp_timePass__front,
.lp_timePass__back
    box-sizing              border-box /* 2 */
    position                relative /* 1 */

.lp_timePass__front
    background              url(../img/time-pass-background.png) 0 0/100% no-repeat
    padding                 $fs-1 round(4 * $fs-1) $fs-1 $fs-1

.lp_timePass__back
    background              url(../img/time-pass-background-flip.png) 0 0/100% no-repeat
    display                 none
    padding                 $fs-1 $fs-1 $fs-1 round(4 * $fs-1)

.lp_timePass.lp_is-flipped
    .lp_timePass__front
        display             none

    .lp_timePass__back
        display             block


// time pass frontside -------------------------------------------------------------------------------------------------
/**
 * Time pass title, usually something descriptive like "24h News Pass"
 *
 * 1. Restrict title to one line
 * 2. Cut off excess text, if supported by browser, with an ellipsis
 */
.lp_timePass_title
    color                   $text
    font-size               $fs-15
    line-height             1.3
    margin                  0 0 $fs-05
    overflow                hidden /* 2 */
    text-overflow           ellipsis /* 2 */
    white-space             nowrap /* 1 */

/**
 * Time pass description
 *
 * 1. Normalize appearance
 * 2. Restrict description to three lines
 */
.lp_timePass_description
    color                   $text-lighter
    font-size               $fs-1 /* 1 */
    height                  3.9em /* 2 */
    line-height             1.3 /* 1 */
    margin                  0 /* 1 */
    overflow                hidden /* 2 */

/**
 * Wrapper for purchase button and terms link
 *
 * 1. Take up full available width, i.e. 100% - padding of .lp_timePass
 */
.lp_timePass_actions
    bottom                  1em
    position                absolute
    width                   80%; /* 1 - fallback for browsers that don't support calc */
    width                   calc(100% - 4em) /* 1 */

    .lp_purchaseLink.lp_button
        display             inline-block                                                            !important
        float               none                                                                    !important
        vertical-align      middle                                                                  !important

    .lp_timePass_termsLink
        display             inline-block
        padding             $fs-05 $fs-1
        vertical-align      middle


// time pass flipside --------------------------------------------------------------------------------------------------
.lp_timePass__conditions
    border                  0 none                                                                  !important
    border-collapse         collapse                                                                !important

    th,
    td
        border              0 none                                                                  !important
        padding             0 0 $fs-025 0                                                           !important
        vertical-align      top                                                                     !important

    th
        color               $text-lighter                                                           !important
        font-weight         normal                                                                  !important
        padding-right       $fs-1                                                                   !important
        text-align          left                                                                    !important

    td
        text-align          left                                                                    !important

.lp_timePass_frontsideLink
    background              $clickable
    border-radius           16px
    color                   $text-inverse
    padding                 $fs-05 $fs-1
    position                absolute
    top                     $fs-1
    left                    -($fs-05)
    -webkit-transition      all 0.25s
            transition      all 0.25s

    &:hover
        background          $clickable-highlight
        color               $text-inverse
        left                -($fs-1)


// time pass gift cards ------------------------------------------------------------------------------------------------
.lp_gift-card {
    background: $background-lightest url(../img/gift-card-background.png) 0 0/100% no-repeat !important;
    box-sizing: border-box !important;
    color: $text-lighter !important;
    font-size: $fs-1 !important;
    font-weight: normal !important;
    height: 252px !important;
    line-height: 1.5 !important;
    margin: $fs-1 !important;
    padding: $fs-15 $fs-15 $fs-15 ($fs-1 * 12) !important;
    width: 480px !important;

    /**
     * 1. Cut off too long texts
     */
    .lp_gift-card__title {
        color: #d82b17 !important;
        font-size: $fs-15 !important;
        font-style: normal !important;
        margin: $fs-05 0 $fs-1 !important;
        white-space: nowrap !important; /* 1 */
        overflow: hidden !important; /* 1 */
        text-overflow: ellipsis !important; /* 1 */
    }

    /**
     * 1. Cut off too long texts
     */
    .lp_gift-card__description {
        margin: 0 0 $fs-1 !important;
        max-height: $fs-3 !important; /* 1 */
        overflow: hidden !important; /* 1 */
        text-overflow: ellipsis !important; /* 1 */
    }

    .lp_gift-card___conditions {
        border-collapse: collapse !important;
        font-size: $fs-075 !important;
        margin: 0 0 $fs-1 !important;
        width: auto !important;

        &,
        th,
        td {
            border: 0 none !important;
        }

        th {
            font-weight: normal !important;
            padding: 0 $fs-05 $fs-025 0 !important;
            text-transform: none !important;
        }

        td {
            padding: 0 0 $fs-025 !important;
        }
    }

    .lp_purchaseLink.lp_button {
        float: left !important;
    }

    .lp_voucherCodeLabel {
        margin: 0 $fs-025;
        padding: 0 $fs-05;
    }
}

.lp_gift-card__buy-another {
    // margin-left: $fs-1 * 12;
    // padding: $fs-1;
}


// voucher codes -------------------------------------------------------------------------------------------------------
/* the six-character voucher code */
.lp_voucherCodeLabel {
    background:             $background-lightest;
    border:                 2px solid orange;
    color:                  orange;
    display:                inline-block;
    font-family:            monospace;
    font-size:              $fs-15;
    margin-right:           $fs-025;
    padding:                $fs-05;
}

/* price and number of times redeemed */
.lp_voucherCodeInfos {
    display:                inline-block;
}
.lp_voucherList .lp_voucherCodeInfos {
    vertical-align:         top;
}


// sidebar widget ------------------------------------------------------------------------------------------------------
/**
 * time pass widget
*/
.lp_timePassWidget
    // unstyled, to simplify integration into theme

    .lp_timePass
        display             block                                                                   !important
        margin              $fs-1                                                                   !important

        &:last-child
            margin-bottom   0 /* remove margin after last time pass, because the widget has a padding */ !important

.lp_timePass_introductoryText,
.lp_timePass_callToActionText
    margin                  0 0 $fs-1                                                               !important

/**
 * voucher code section
 *
 * 1. By default, only a hint text is visible
 * 2. The input is transparent and overlayed over the hint text
 * 3. When the input is focused, it is rendered like an input, the hint text is hidden, and the button is shown
 * 4. Make sure the input is wide enough for the six character voucher code
 * 5. Prevent the input to be wider than the time pass and look weird
 */
.lp_timePassWidget_voucherCodeWrapper
    clear                   left                                                                    !important
    margin                  $fs-1                                                                   !important
    max-width               308px /* 5 */                                                           !important
    min-width               round(18 * $fs-1) /* 4 */                                               !important
    position                relative                                                                !important

.lp_voucherCodeFeedbackMessage
    background              $background-highlight                                                   !important
    border-radius           3px                                                                     !important
    color                   $text                                                                   !important
    cursor                  pointer                                                                 !important
    line-height             1.3                                                                     !important
    padding                 $fs-1 $fs-05                                                            !important
    text-align              center                                                                  !important

    ~ *
        display             none                                                                    !important

/**
 * input for voucher code
 *
 * 1. Remove ugly browser default styles
 */
.lp_timePassWidget_voucherCode
    background              transparent                                                             !important
    border                  2px solid transparent                                                   !important
    box-shadow              none /* 1 */                                                            !important
    bottom                  0                                                                       !important
    color                   transparent                                                             !important
    cursor                  pointer                                                                 !important
    font-size               $fs-15                                                                  !important
    left                    0                                                                       !important
    padding                 $fs-1 $fs-1 $fs-1 3.5em                                                 !important
    position                absolute /* 2 */                                                        !important
    top                     0                                                                       !important
    width                   100%                                                                    !important
    z-index                 $zindex-overlayed_2 /* 2 */                                             !important

    &:hover ~ .lp_timePassWidget_voucherCodeHint
        color               $clickable-highlight                                                    !important

    &:focus
        -moz-appearance     none                                                                    !important
        -webkit-appearance  none                                                                    !important
        background          $background-lightest                                                    !important
        border              2px solid $clickable-highlight /* 3 */                                  !important
        border-radius       5px                                                                     !important
        box-shadow          none /* 1 */                                                            !important
        color               $text /* 3 */                                                           !important
        cursor              normal                                                                  !important

        /* hide / show siblings, when the voucher input is focused */
        ~ .lp_timePassWidget_voucherCodeHint
            visibility      hidden /* 3 */                                                          !important

        ~ .lp_timePassWidget_voucherCodeInputHint
            display         block /* 3 */                                                           !important
            font-size       $fs-15                                                                  !important
            position        absolute                                                                !important
            z-index         $zindex-overlayed_2                                                     !important

        ~ .lp_timePassWidget_redeemVoucherCode
            background      $clickable                                                              !important
            border-radius   4px                                                                     !important
            bottom          $fs-05                                                                  !important
            color           $text-inverse                                                           !important
            cursor          pointer                                                                 !important
            display         inline-block /* 3 */                                                    !important
            font-size       $fs-15                                                                  !important
            position        absolute                                                                !important
            padding         $fs-05 $fs-1                                                            !important
            right           $fs-05                                                                  !important
            text-decoration none                                                                    !important
            top             $fs-05                                                                  !important
            z-index         $zindex-overlayed_3                                                     !important

            &:hover,
            &:focus,
            &:active
                background  $clickable-highlight                                                    !important
                text-decoration none                                                                !important

// define line-height to minimize influence of theme styles
.lp_timePass_introductoryText,
.lp_timePass_callToActionText
    line-height             1.5                                                                     !important

// define line-height to minimize influence of theme styles
.lp_timePassWidget_voucherCodeInputHint,
.lp_timePassWidget_voucherCode,
.lp_timePassWidget_redeemVoucherCode,
.lp_timePassWidget_voucherCodeHint
    line-height             1                                                                       !important

.lp_timePassWidget_voucherCodeHint
    color                   $clickable                                                              !important
    display                 block  /* 1 */                                                          !important
    font-size               $fs-1                                                                   !important
    margin                  0                                                                       !important
    padding                 $fs-125 0                                                               !important
    text-decoration         none                                                                    !important
    visibility              visible /* 1 */                                                         !important

.lp_timePassWidget_voucherCodeInputHint
    color                   $text-lighter                                                           !important
    display                 none                                                                    !important
    margin                  0                                                                       !important
    padding                 $fs-1 $fs-05 $fs-1 $fs-1                                                !important

/**
 * button for redeeming voucher code
 */
.lp_timePassWidget_redeemVoucherCode
    display                 none                                                                    !important


// redeem gift code widget ---------------------------------------------------------------------------------------------
.lp_redeem-gift-code__wrapper,
.lp_redeem-gift-code__code {
    height: round(3.75 * $fs-1) !important; /* 6 - TODO: this is a magic number that should not be required */
    position: relative !important;
    width: 300px !important;
}

// add a background to the wrapper so that the transparent input works on both light and dark themes
.lp_redeem-gift-code__wrapper {
    background: $background-lightest;
    border-radius: 6px;
    margin: 1em 0;
}

.lp_redeem-gift-code__feedback-message {
    background: $background-highlight !important;
    border-radius: 3px !important;
    color: $text !important;
    cursor: pointer !important;
    line-height: 1.3 !important;
    padding: $fs-1 $fs-05 !important;
    text-align: center !important;

    ~ * {
        display: none !important;
    }
}

/**
 * input for gift code
 */
.lp_redeem-gift-code__code {
    background: transparent !important;
    border: 2px solid $border !important;
    border-radius: 5px !important;
    box-shadow: none !important; /* 1 */
    bottom: 0 !important;
    color: $text !important;
    font-size: $fs-15 !important;
    padding: $fs-1 $fs-1 $fs-075 3.5em !important;
    position: absolute !important;
    top: 0 !important;
    z-index: $zindex-elevated_1 !important;

    &:hover,
    &:focus,
    &:active {
           -moz-appearance: none !important;
        -webkit-appearance: none !important;
        border-color: $clickable-highlight !important;
    }
}

.lp_redeem-gift-code__input-hint {
    color: $text-lighter !important;
    font-size: $fs-15 !important;
    left: $fs-15 !important;
    margin: 0 !important;
    position: absolute !important;
    top: $fs-075 !important;
}

.lp_redeem-gift-code__button {
    background: $clickable !important;
    border-radius: 4px !important;
    bottom: $fs-05 !important;
    color: $text-inverse !important;
    cursor: pointer !important;
    display: inline-block;
    position: absolute !important;
    padding: $fs-05 $fs-1 !important;
    right: $fs-05 !important;
    text-decoration: none !important;
    top: $fs-05 !important;
    z-index: $zindex-elevated_2 !important;

    &:hover,
    &:focus,
    &:active {
        background: $clickable-highlight !important;
        text-decoration: none !important;
    }
}

// define line-height to minimize influence of theme styles
.lp_redeem-gift-code__code,
.lp_redeem-gift-code__input-hint,
.lp_redeem-gift-code__button {
    line-height: 1.5 !important;
}


/**
 * time pass widget variant 'small'
 * reduced height, width, font-size, margins, and paddings
 */
.lp_timePassWidget-small
    margin-right            $fs-05                                                                  !important
    margin-bottom           $fs-05                                                                  !important

    .lp_timePass,
    .lp_timePass__front,
    .lp_timePass__back
        height              112px                                                                   !important
        width               224px                                                                   !important

    .lp_timePass__front
        background          url(../img/time-pass-background-small.png) 0 0/100% no-repeat           !important
        padding             $fs-05 round(6 * $fs-05) $fs-05 $fs-05                                  !important

    .lp_timePass__back
        background          url(../img/time-pass-background-flip-small.png) 0 0/100% no-repeat      !important
        padding             $fs-05 $fs-05 $fs-05 round(6 * $fs-05)                                  !important

    .lp_timePass_title
        font-size           $fs-1                                                                   !important
        margin-top          $fs-05                                                                  !important
        margin-left         $fs-025                                                                 !important

    .lp_timePass_description
        font-size           $fs-075                                                                 !important
        height              2.9em                                                                   !important
        margin-left         $fs-025                                                                 !important

    .lp_timePass_actions
        bottom              0.5em                                                                   !important
        width               80% /* 1 - fallback for browsers that don't support calc */             !important
        width               calc(100% - 2em) /* 1 */                                                !important

        .lp_purchaseLink.lp_button
            font-size       $fs-15                                                                  !important

            &:before
                font-size   36px                                                                    !important

        .lp_timePass_termsLink
            padding         $fs-025 $fs-05                                                          !important

    .lp_timePass__conditions
        th,
        td
            font-size       $fs-075                                                                 !important
            padding-bottom  0                                                                       !important

        th
            padding-right   $fs-05                                                                  !important

    .lp_timePass_frontsideLink
        font-size           $fs-075                                                                 !important
        padding             $fs-025 $fs-05                                                          !important
