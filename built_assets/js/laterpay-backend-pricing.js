!function(e){e(function(){function t(){var t={revenueModel:".lp_js_revenueModel",revenueModelLabel:".lp_js_revenueModelLabel",revenueModelLabelDisplay:".lp_js_revenueModelLabelDisplay",revenueModelInput:".lp_js_revenueModelInput",priceInput:".lp_js_priceInput",emptyState:".lp_js_emptyState",purchaseModeForm:e("#lp_js_changePurchaseModeForm"),purchaseModeInput:e(".lp_js_onlyTimePassPurchaseModeInput"),timePassOnlyHideElements:e(".lp_js_hideInTimePassOnlyMode"),globalDefaultPriceForm:e("#lp_js_globalDefaultPriceForm"),globalDefaultPriceInput:e("#lp_js_globalDefaultPriceInput"),globalDefaultPriceDisplay:e("#lp_js_globalDefaultPriceDisplay"),globalDefaultPriceRevenueModelDisplay:e("#lp_js_globalDefaultPriceRevenueModelDisplay"),editGlobalDefaultPrice:e("#lp_js_editGlobalDefaultPrice"),cancelEditingGlobalDefaultPrice:e("#lp_js_cancelEditingGlobalDefaultPrice"),saveGlobalDefaultPrice:e("#lp_js_saveGlobalDefaultPrice"),globalDefaultPriceShowElements:e("#lp_js_globalDefaultPriceShowElements"),globalDefaultPriceEditElements:e("#lp_js_globalDefaultPriceEditElements"),categoryDefaultPrices:e("#lp_js_categoryDefaultPriceList"),addCategory:e("#lp_js_addCategoryDefaultPrice"),categoryDefaultPriceTemplate:e("#lp_js_categoryDefaultPriceTemplate"),categoryDefaultPriceForm:".lp_js_categoryDefaultPriceForm",editCategoryDefaultPrice:".lp_js_editCategoryDefaultPrice",cancelEditingCategoryDefaultPrice:".lp_js_cancelEditingCategoryDefaultPrice",saveCategoryDefaultPrice:".lp_js_saveCategoryDefaultPrice",deleteCategoryDefaultPrice:".lp_js_deleteCategoryDefaultPrice",categoryDefaultPriceShowElements:".lp_js_categoryDefaultPriceShowElements",categoryDefaultPriceEditElements:".lp_js_categoryDefaultPriceEditElements",categoryTitle:".lp_js_categoryDefaultPriceCategoryTitle",categoryDefaultPriceDisplay:".lp_js_categoryDefaultPriceDisplay",selectCategory:".lp_js_selectCategory",categoryDefaultPriceInput:".lp_js_categoryDefaultPriceInput",categoryId:".lp_js_categoryDefaultPriceCategoryId",addTimePass:e("#lp_js_addTimePass"),timePassEditor:e("#lp_js_timePassEditor"),timePassTemplate:e("#lp_js_timePassTemplate"),timePassWrapper:".lp_js_timePassWrapper",timePassFormTemplate:e("#lp_js_timePassFormTemplate"),timePassFormId:"lp_js_timePassForm",timePassForm:".lp_js_timePassEditorForm",timePassDuration:".lp_js_switchTimePassDuration",timePassDurationClass:"lp_js_switchTimePassDuration",timePassPeriod:".lp_js_switchTimePassPeriod",timePassPeriodClass:"lp_js_switchTimePassPeriod",timePassScope:".lp_js_switchTimePassScope",timePassScopeClass:"lp_js_switchTimePassScope",timePassScopeCategory:".lp_js_switchTimePassScopeCategory",timePassScopeCategoryClass:"lp_js_switchTimePassScopeCategory",timePassCategoryId:".lp_js_timePassCategoryId",timePassCategoryWrapper:".lp_js_timePassCategoryWrapper",timePassTitle:".lp_js_timePassTitleInput",timePassTitleClass:"lp_js_timePassTitleInput",timePassPrice:".lp_js_timePassPriceInput",timePassPriceClass:"lp_js_timePassPriceInput",timePassRevenueModel:".lp_js_timePassRevenueModelInput",timePassDescription:".lp_js_timePassDescriptionTextarea",timePassDescriptionClass:"lp_js_timePassDescriptionTextarea",timePassPreviewTitle:".lp_js_timePassPreviewTitle",timePassPreviewDescription:".lp_js_timePassPreviewDescription",timePassPreviewValidity:".lp_js_timePassPreviewValidity",timePassPreviewAccess:".lp_js_timePassPreviewAccess",timePassPreviewPrice:".lp_js_timePassPreviewPrice",timePass:".lp_js_timePass",timePassId:".lp_js_timePassId",landingPageInput:".lp_js_landingPageInput",landingPageSave:"#lp_js_landingPageSave",landingPageForm:e("#lp_js_landingPageForm"),timePassShowElements:".lp_js_saveTimePass, .lp_js_cancelEditingTimePass",timePassEditElements:".lp_js_editTimePass, .lp_js_deleteTimePass",voucherPriceInput:".lp_js_voucherPriceInput",generateVoucherCode:".lp_js_generateVoucherCode",voucherDeleteLink:".lp_js_deleteVoucher",voucherEditor:".lp_js_voucherEditor",voucherHiddenPassId:"#lp_js_timePassEditorHiddenPassId",voucherPlaceholder:".lp_js_voucherPlaceholder",voucherList:".lp_js_voucherList",voucher:".lp_js_voucher",voucherTimesRedeemed:".lp_js_voucherTimesRedeemed",bulkPriceForm:e("#lp_js_bulkPriceEditorForm"),bulkPriceFormHiddenField:e("#lp_js_bulkPriceEditorHiddenFormInput"),bulkPriceOperationIdHiddenField:e("#lp_js_bulkPriceEditorHiddenIdInput"),bulkPriceMessageHiddenField:e("#lp_js_bulkPriceEditorHiddenMessageInput"),bulkPriceAction:e("#lp_js_selectBulkAction"),bulkPriceObjects:e("#lp_js_selectBulkObjects"),bulkPriceObjectsCategory:e("#lp_js_selectBulkObjectsCategory"),bulkPriceObjectsCategoryWithPrice:e("#lp_js_selectBulkObjectsCategoryWithPrice"),bulkPriceChangeAmountPreposition:e("#lp_js_bulkPriceEditorAmountPreposition"),bulkPriceChangeAmount:e("#lp_js_setBulkChangeAmount"),bulkPriceChangeUnit:e("#lp_js_selectBulkChangeUnit"),bulkPriceSubmit:e("#lp_js_applyBulkOperation"),bulkSaveOperationLink:e("#lp_js_saveBulkOperation"),bulkDeleteOperationLink:".lp_js_deleteSavedBulkOperation",bulkApplySavedOperationLink:".lp_js_applySavedBulkOperation",editing:"lp_is-editing",unsaved:"lp_is-unsaved",payPerUse:"ppu",singleSale:"sis",selected:"lp_is-selected",disabled:"lp_is-disabled",hidden:"lp_hidden",navigation:e(".lp_navigation")},a=function(){e("body").on("change",t.revenueModelInput,function(){i(e(this).parents("form"))}),e("body").on("keyup",t.priceInput,800),t.purchaseModeInput.on("change",function(){H(t.purchaseModeForm)}),t.editGlobalDefaultPrice.mousedown(function(){l()}).click(function(e){e.preventDefault()}),t.cancelEditingGlobalDefaultPrice.mousedown(function(){r()}).click(function(e){e.preventDefault()}),t.saveGlobalDefaultPrice.mousedown(function(){o()}).click(function(e){e.preventDefault()}),t.addCategory.mousedown(function(){n()}).click(function(e){e.preventDefault()}),e("body").on("click",t.editCategoryDefaultPrice,function(){var a=e(this).parents(t.categoryDefaultPriceForm);c(a)}),e("body").on("click",t.cancelEditingCategoryDefaultPrice,function(){var a=e(this).parents(t.categoryDefaultPriceForm);p(a)}),e("body").on("click",t.saveCategoryDefaultPrice,function(){var a=e(this).parents(t.categoryDefaultPriceForm);u(a)}),e("body").on("click",t.deleteCategoryDefaultPrice,function(){var a=e(this).parents(t.categoryDefaultPriceForm);d(a)}),t.addTimePass.mousedown(function(){v()}).click(function(e){e.preventDefault()}),t.timePassEditor.on("mousedown",".lp_js_editTimePass",function(){_(e(this).parents(t.timePassWrapper))}).on("click",".lp_js_editTimePass",function(e){e.preventDefault()}),t.timePassEditor.on("change",t.timePassRevenueModel,function(){C(e(this).parents("form"))}),t.timePassEditor.on("change",t.timePassDuration,function(){g(e(this).parents(t.timePassWrapper),e(this))}),t.timePassEditor.on("change",t.timePassPeriod,function(){w(e(this),e(this).parents(t.timePassWrapper)),g(e(this).parents(t.timePassWrapper),e(this))}),t.timePassEditor.on("change",t.timePassScope,function(){k(e(this)),g(e(this).parents(t.timePassWrapper),e(this))}),t.timePassEditor.on("change",t.timePassScopeCategory,function(){g(e(this).parents(t.timePassWrapper),e(this))}),t.timePassEditor.on("input",[t.timePassTitle,t.timePassDescription].join(),function(){g(e(this).parents(t.timePassWrapper),e(this))}),t.timePassEditor.on("keyup",t.timePassPrice,R(function(){i(e(this).parents("form"),!1,e(this)),g(e(this).parents(t.timePassWrapper),e(this))},800)),t.timePassEditor.on("click",".lp_js_cancelEditingTimePass",function(a){y(e(this).parents(t.timePassWrapper)),a.preventDefault()}),t.timePassEditor.on("click",".lp_js_saveTimePass",function(a){b(e(this).parents(t.timePassWrapper)),a.preventDefault()}),t.timePassEditor.on("click",".lp_js_deleteTimePass",function(a){j(e(this).parents(t.timePassWrapper)),a.preventDefault()}),t.timePassEditor.on("mousedown",".lp_js_flipTimePass",function(){D(this)}).on("click",".lp_js_flipTimePass",function(e){e.preventDefault()}),t.timePassEditor.on("keyup",t.voucherPriceInput,R(function(){i(e(this).parents("form"),!0,e(this))},800)),t.timePassEditor.on("mousedown",t.generateVoucherCode,function(){E(e(this).parents(t.timePassWrapper))}).on("click",t.generateVoucherCode,function(e){e.preventDefault()}),t.timePassEditor.on("click",t.voucherDeleteLink,function(t){S(e(this).parent()),t.preventDefault()}),t.landingPageForm.on("click",t.landingPageSave,function(e){x(t.landingPageForm),e.preventDefault()}),t.bulkPriceAction.add(t.bulkPriceObjects).on("change",function(){V(t.bulkPriceAction.val(),t.bulkPriceObjects.val())}),t.bulkPriceObjectsCategoryWithPrice.on("change",function(){t.bulkPriceChangeAmountPreposition.text(lpVars.i18n.toCategoryDefaultPrice+" "+t.bulkPriceObjectsCategoryWithPrice.find(":selected").attr("data-price")+" "+lpVars.defaultCurrency)}),t.bulkPriceForm.on("submit",function(e){t.bulkPriceFormHiddenField.val("bulk_price_form"),t.bulkPriceOperationIdHiddenField.val(void 0),t.bulkPriceMessageHiddenField.val(void 0),O(),e.preventDefault()}),t.bulkSaveOperationLink.mousedown(function(){A()}).click(function(e){e.preventDefault()}),e("body").on("mousedown",t.bulkApplySavedOperationLink,function(){W(e(this).parent())}).on("click",t.bulkApplySavedOperationLink,function(e){e.preventDefault()}),e("body").on("mousedown",t.bulkDeleteOperationLink,function(){U(e(this).parent())}).on("click",t.bulkDeleteOperationLink,function(e){e.preventDefault()})},i=function(t,a,i){var l=i?i:e(".lp_number-input",t),r=l.val();return r=r.replace(/[^0-9\,\.]/g,""),r=r.indexOf(",")>-1?parseFloat(r.replace(",",".")).toFixed(2):parseFloat(r).toFixed(2),isNaN(r)&&(r=0),r=Math.abs(r),r>149.99?r=149.99:r>0&&.05>r&&(r=.05),a||s(r,t),r=r.toFixed(2),"de_DE"===lpVars.locale&&(r=r.replace(".",",")),l.val(r),r},s=function(a,i){var s;if(i.hasClass("lp_js_timePassEditorForm")){var l=e(t.timePassRevenueModel,i),r=l.prop("checked");s=r?t.singleSale:t.payPerUse,a>5&&s===t.payPerUse?l.prop("checked",!0):1.49>a&&s===t.singleSale&&l.prop("checked",!1)}else{var o=e(".lp_js_revenueModelInput[value="+t.payPerUse+"]",i),n=e(".lp_js_revenueModelInput[value="+t.singleSale+"]",i);s=e("input:radio:checked",i).val(),0===a||a>=.05&&5>=a?o.removeProp("disabled").parent("label").removeClass(t.disabled):o.prop("disabled","disabled").parent("label").addClass(t.disabled),a>=1.49?n.removeProp("disabled").parent("label").removeClass(t.disabled):n.prop("disabled","disabled").parent("label").addClass(t.disabled),a>5&&s===t.payPerUse?n.prop("checked","checked"):1.49>a&&s===t.singleSale&&o.prop("checked","checked"),e("label",i).removeClass(t.selected),e(".lp_js_revenueModelInput:checked",i).parent("label").addClass(t.selected)}},l=function(){t.globalDefaultPriceShowElements.velocity("slideUp",{duration:250,easing:"ease-out"}),t.globalDefaultPriceEditElements.velocity("slideDown",{duration:250,easing:"ease-out",complete:function(){setTimeout(function(){t.globalDefaultPriceInput.val(e.trim(t.globalDefaultPriceDisplay.text())).focus()},50)}}),t.globalDefaultPriceForm.addClass(t.editing)},r=function(){t.globalDefaultPriceShowElements.velocity("slideDown",{duration:250,easing:"ease-out"}),t.globalDefaultPriceEditElements.velocity("slideUp",{duration:250,easing:"ease-out"}),t.globalDefaultPriceForm.removeClass(t.editing),t.globalDefaultPriceInput.val(t.globalDefaultPriceDisplay.text());var a=t.globalDefaultPriceRevenueModelDisplay.text().toLowerCase();e(t.revenueModelLabel,t.globalDefaultPriceForm).removeClass(t.selected),e(".lp_js_revenueModelInput[value="+a+"]",t.globalDefaultPriceForm).prop("checked","checked").parent("label").addClass(t.selected)},o=function(){var a=i(t.globalDefaultPriceForm);t.globalDefaultPriceInput.val(a),e.post(ajaxurl,t.globalDefaultPriceForm.serializeArray(),function(e){e.success&&(t.globalDefaultPriceDisplay.text(e.price),t.globalDefaultPriceRevenueModelDisplay.text(e.revenue_model)),t.navigation.showMessage(e),r()},"json")},n=function(){t.addCategory.velocity("fadeOut",{duration:250}),e(t.emptyState,t.categoryDefaultPrices).is(":visible")&&e(t.emptyState,t.categoryDefaultPrices).velocity("fadeOut",{duration:400});var a=t.categoryDefaultPriceTemplate.clone().removeAttr("id").insertBefore("#lp_js_categoryDefaultPriceList").velocity("slideDown",{duration:250,easing:"ease-out"});c(a)},c=function(a){e(".lp_js_categoryDefaultPriceForm.lp_is-editing").each(function(){p(e(this),!0)}),a.addClass(t.editing),e(t.categoryDefaultPriceShowElements,a).velocity("slideUp",{duration:250,easing:"ease-out"}),t.addCategory.velocity("fadeOut",{duration:250}),e(t.categoryDefaultPriceEditElements,a).velocity("slideDown",{duration:250,easing:"ease-out",complete:function(){e(t.categoryDefaultPriceInput,a).focus()}}),f(a,t.selectCategory,"laterpay_get_categories_with_price",m)},u=function(a){var s=i(a);e(t.categoryDefaultPriceInput,a).val(s),e.post(ajaxurl,a.serializeArray(),function(i){i.success&&(e(t.categoryDefaultPriceDisplay,a).text(i.price),e(t.revenueModelLabelDisplay,a).text(i.revenue_model),e(t.categoryDefaultPriceInput,a).val(i.price),e(t.categoryTitle,a).text(i.category),e(t.categoryId,a).val(i.category_id),a.removeClass(t.unsaved)),p(a),t.navigation.showMessage(i)},"json")},p=function(a,i){if(a.removeClass(t.editing),a.hasClass(t.unsaved))a.velocity("slideUp",{duration:250,easing:"ease-out",complete:function(){e(this).remove(),0===e(t.categoryDefaultPriceForm+":visible").length&&e(t.emptyState,t.categoryDefaultPrices).velocity("fadeIn",{duration:400})}});else{e(t.categoryDefaultPriceEditElements,a).velocity("slideUp",{duration:250,easing:"ease-out"}),e(t.selectCategory,a).select2("destroy"),e(t.categoryDefaultPriceInput,a).val(e(t.categoryDefaultPriceDisplay,a).text().trim());var s=e(t.revenueModelLabelDisplay,a).text().toLowerCase();e(t.revenueModelLabel,a).removeClass(t.selected),e(".lp_js_revenueModelInput[value="+s+"]",a).prop("checked","checked").parent("label").addClass(t.selected),e(t.categoryDefaultPriceShowElements,a).velocity("slideDown",{duration:250,easing:"ease-out"})}i||t.addCategory.velocity("fadeIn",{duration:250,display:"inline-block"})},d=function(a){e("input[name=form]",a).val("price_category_form_delete"),e.post(ajaxurl,a.serializeArray(),function(i){i.success&&a.velocity("slideUp",{duration:250,easing:"ease-out",complete:function(){e(this).remove(),0===e(t.categoryDefaultPriceForm+":visible").length&&e(t.emptyState,t.categoryDefaultPrices).velocity("fadeIn",{duration:400})}}),t.navigation.showMessage(i)},"json")},m=function(t,a){var i=e(a).parent().parent().parent();return e(".lp_js_selectCategory",i).val(t.text),e(".lp_js_categoryDefaultPriceCategoryId",i).val(t.id),t.text},P=function(a,i){var s=e(i).parents("form");return a.id&&e(t.timePassCategoryId,s).val(a.id),e(t.timePassScopeCategory,s).val(a.text),a.text},f=function(t,a,i,s){e(a,t).select2({allowClear:!0,ajax:{url:ajaxurl,data:function(e){return{form:i,term:e,action:"laterpay_pricing"}},results:function(t){var a=[];return e.each(t,function(e){var i=t[e];a.push({id:i.term_id,text:i.name})}),{results:a}},dataType:"json",type:"POST"},initSelection:function(t,a){var s=e(t).val();if(""!==s){var l={text:s};a(l)}else e.post(ajaxurl,{form:i,term:"",action:"laterpay_pricing"},function(e){if(e&&void 0!==e[0]){var t=e[0];a({id:t.term_id,text:t.name})}})},formatResult:function(e){return e.text},formatSelection:s,escapeMarkup:function(e){return e}})},v=function(){t.addTimePass.velocity("fadeOut",{duration:250}),e(t.emptyState,t.timePassEditor).is(":visible")&&e(t.emptyState,t.timePassEditor).velocity("fadeOut",{duration:400}),t.timePassEditor.prepend(t.timePassTemplate.clone().removeAttr("id"));var a=e(".lp_js_timePassWrapper",t.timePassEditor).first();e(t.timePassForm,a).attr("id",t.timePassFormId).addClass(t.unsaved),h(a),a.velocity("slideDown",{duration:250,easing:"ease-out",complete:function(){e(this).removeClass(t.hidden)}}).find(t.timePassForm).velocity("slideDown",{duration:250,easing:"ease-out",complete:function(){e(this).removeClass(t.hidden)}})},_=function(a){var i=t.timePassFormTemplate.clone().attr("id",t.timePassFormId);e(".lp_js_timePassEditorContainer",a).html(i),h(a),e(t.timePassEditElements,a).addClass(t.hidden),e(t.timePassShowElements,a).removeClass(t.hidden),i.removeClass(t.hidden)},h=function(a){var s=a.data("pass-id"),l=lpVars.time_passes_list[s],r=lpVars.vouchers_list[s],o=e(t.timePassRevenueModel,a),n="";if(l){e("input, select, textarea",a).each(function(t,i){n=e(i,a).attr("name"),""!==n&&void 0!==l[n]&&"revenue_model"!==n&&e(i,a).val(l[n])}),i(a.find("form"),!1,e(t.timePassPrice,a)),e(t.voucherPriceInput,a).val(e(t.timePassPrice,a).val()),l.revenue_model===t.singleSale&&o.prop("checked",!0),e(t.timePassCategoryWrapper,a).hide(),f(a,t.timePassScopeCategory,"laterpay_get_categories",P);var c=e(t.timePassScope,a).find("option:selected");"0"!==c.val()&&e(t.timePassCategoryWrapper,a).show(),T(a),r instanceof Object&&e.each(r,function(e,t){I(e,t,a)})}},g=function(a,i){var s=""!==i.val()?i.val():" ";if(i.hasClass(t.timePassDurationClass)||i.hasClass(t.timePassPeriodClass)){var l=e(t.timePassDuration,a).val(),r=e(t.timePassPeriod,a).find("option:selected").text();r=parseInt(l,10)>1?r+"s":r,s=l+" "+r,e(t.timePassPreviewValidity,a).text(s)}else if(i.hasClass(t.timePassScopeClass)||i.hasClass(t.timePassScopeCategoryClass)){var o=e(t.timePassScope,a).find("option:selected");s=o.text(),"0"!==o.val()&&(s+=" "+e(t.timePassScopeCategory,a).val()),e(t.timePassPreviewAccess,a).text(s)}else i.hasClass(t.timePassPriceClass)?(e(".lp_js_purchaseLink",a).html(s+'<small class="lp_purchase-link__currency">'+lpVars.defaultCurrency+"</small>"),e(t.timePassPreviewPrice).text(s+" "+lpVars.defaultCurrency)):i.hasClass(t.timePassTitleClass)?e(t.timePassPreviewTitle,a).text(s):i.hasClass(t.timePassDescriptionClass)&&e(t.timePassPreviewDescription,a).text(s)},y=function(a){var i=a.find(t.timePass).data("pass-id");e(t.timePassForm,a).hasClass(t.unsaved)?a.velocity("fadeOut",{duration:250,complete:function(){e(this).remove(),0===e(t.timePassWrapper+":visible").length&&e(t.emptyState,t.timePassEditor).velocity("fadeIn",{duration:400})}}):e(t.timePassForm,a).velocity("fadeOut",{duration:250,complete:function(){e(this).remove()}}),e(t.timePassEditElements,a).removeClass(t.hidden),e(t.timePassShowElements,a).addClass(t.hidden),T(a),lpVars.vouchers_list[i]instanceof Object&&(e.each(lpVars.vouchers_list[i],function(e,t){F(e,t,a)}),a.find(t.voucherList).show()),t.addTimePass.is(":hidden")&&t.addTimePass.velocity("fadeIn",{duration:250,display:"inline-block"})},b=function(a){e.post(ajaxurl,e(t.timePassForm,a).serializeArray(),function(i){if(i.success){var s=i.data.pass_id;if(lpVars.vouchers_list[s]=i.vouchers,lpVars.time_passes_list[s])lpVars.time_passes_list[s]=i.data,e(".lp_js_timePassPreview",a).html(i.html),e(t.timePassShowElements,a).addClass(t.hidden),e(t.timePassEditElements,a).removeClass(t.hidden),e(t.timePassForm,a).velocity("fadeOut",{duration:250,complete:function(){e(this).remove(),T(a),lpVars.vouchers_list[s]instanceof Object&&(e.each(lpVars.vouchers_list[s],function(e,t){F(e,t,a)}),a.find(t.voucherList).show())}});else{lpVars.time_passes_list[s]=i.data;var l=t.timePassTemplate.clone().removeAttr("id").data("pass-id",s);e(t.timePassId,l).text(s).parent().velocity("fadeIn",{duration:250}),e(".lp_js_timePassPreview",l).html(i.html),e(t.timePassForm,a).remove(),t.timePassEditor.prepend(l),h(l),e(t.timePassShowElements,l).addClass(t.hidden),e(t.timePassEditElements,l).removeClass(t.hidden),a.velocity("fadeOut",{duration:250,complete:function(){e(this).remove(),T(l),lpVars.vouchers_list[s]instanceof Object&&(e.each(lpVars.vouchers_list[s],function(e,t){F(e,t,l)}),l.find(t.voucherList).show()),l.removeClass(t.hidden)}})}}t.addTimePass.is(":hidden")&&t.addTimePass.velocity("fadeIn",{duration:250,display:"inline-block"}),t.navigation.showMessage(i)},"json")},j=function(a){confirm(lpVars.i18n.confirmDeleteTimePass)&&a.velocity("slideUp",{duration:250,easing:"ease-out",begin:function(){e.post(ajaxurl,{action:"laterpay_pricing",form:"time_pass_delete",pass_id:a.data("pass-id")},function(a){a.success?(e(this).remove(),0===e(t.timePassWrapper+":visible").length&&(e(t.emptyState,t.timePassEditor).velocity("fadeIn",{duration:400}),t.purchaseModeInput.prop("checked")&&t.purchaseModeInput.prop("checked",!1).change())):e(this).stop().show(),t.navigation.showMessage(a)},"json")}})},D=function(t){e(t).parents(".lp_time-pass").toggleClass("lp_is-flipped")},k=function(a){var i=e("option:selected",a).val();"0"===i?e(t.timePassCategoryWrapper).hide():e(t.timePassCategoryWrapper).show()},C=function(a){i(a,!1,e(t.timePassPrice,a))},w=function(a,i){var s,l="",r=24,o=a.val(),n=e(t.timePassDuration,i).val();for("4"===o?r=1:"3"===o&&(r=12),s=1;r>=s;s++)l+='<option value="'+s+'">'+s+"</option>";e(t.timePassDuration,i).find("option").remove().end().append(l).val(n&&r>=n?n:1)},E=function(a){e.post(ajaxurl,{form:"generate_voucher_code",action:"laterpay_pricing",price:a.find(t.voucherPriceInput).val()},function(e){e.success?I(e.code,a.find(t.voucherPriceInput).val(),a):t.navigation.showMessage(e)})},I=function(e,a,i){var s=a+" "+lpVars.defaultCurrency,l='<div class="lp_js_voucher lp_voucher" data-code="'+e+'" style="display:none;"><input type="hidden" name="voucher[]" value="'+e+"|"+a+'"><span class="lp_voucher__code">'+e+'</span> <span class="lp_voucher__code-infos">'+lpVars.i18n.voucherText+" "+s+'</span><a href="#" class="lp_js_deleteVoucher lp_edit-link--bold" data-icon="g"></a></div>';i.find(t.voucherPlaceholder).prepend(l).find("div").first().velocity("slideDown",{duration:250,easing:"ease-out"})},F=function(e,a,i){var s=i.data("pass-id"),l=lpVars.vouchers_statistic[s]?lpVars.vouchers_statistic[s]:0,r=a+" "+lpVars.defaultCurrency,o='<div class="lp_js_voucher lp_voucher" data-code="'+e+'"><span class="lp_voucher__code">'+e+'</span><span class="lp_voucher__code-infos">'+lpVars.i18n.voucherText+" "+r+'.<br><span class="lp_js_voucherTimesRedeemed">'+l+"</span> "+lpVars.i18n.timesRedeemed+"</span></div>";i.find(t.voucherList).append(o)},T=function(e){e.find(t.voucher).remove()},S=function(t){t.velocity("slideUp",{duration:250,easing:"ease-out",complete:function(){e(this).remove()}})},x=function(a){e.post(ajaxurl,a.serializeArray(),function(e){t.navigation.showMessage(e)})},O=function(a){e.post(ajaxurl,a||t.bulkPriceForm.serializeArray(),function(e){t.navigation.showMessage(e)},"json")},M=function(a){t.bulkPriceObjects.removeClass(t.disabled).append(e("<option>",{value:"in_category",text:lpVars.inCategoryLabel,selected:!!a}))},V=function(a,i){var s="in_category"===i;switch(t.bulkPriceChangeUnit.find("option").each(function(){"%"===e(this).text()&&e(this).remove()}).end().addClass(t.disabled),t.bulkPriceObjects.find("option").each(function(){"in_category"===e(this).val()&&(e(this).remove(),t.bulkPriceObjects.addClass(t.disabled))}),t.bulkPriceObjectsCategory.prop("disabled",!0).hide(),t.bulkPriceObjectsCategoryWithPrice.prop("disabled",!0).hide(),t.bulkPriceChangeAmountPreposition.hide(),t.bulkPriceChangeAmount.prop("disabled",!0).hide(),t.bulkPriceChangeUnit.prop("disabled",!0).hide(),a){case"set":t.bulkPriceChangeAmountPreposition.show().text(lpVars.i18n.to),t.bulkPriceChangeAmount.prop("disabled",!1).show(),t.bulkPriceChangeUnit.show();break;case"increase":case"reduce":t.bulkPriceChangeAmountPreposition.show().text(lpVars.i18n.by),t.bulkPriceChangeAmount.prop("disabled",!1).show(),t.bulkPriceChangeUnit.prop("disabled",!1).show(),t.bulkPriceChangeUnit.removeClass(t.disabled).append(e("<option>",{value:"percent",text:"%"}));break;case"free":t.bulkPriceObjectsCategory.length&&(M(s),s&&t.bulkPriceObjectsCategory.prop("disabled",!1).show());break;case"reset":t.bulkPriceChangeAmountPreposition.text(lpVars.i18n.toGlobalDefaultPrice+" "+lpVars.globalDefaultPrice+" "+lpVars.defaultCurrency),t.bulkPriceObjectsCategoryWithPrice.length&&(M(s),s&&t.bulkPriceObjectsCategoryWithPrice.prop("disabled",!1).show().change()),t.bulkPriceChangeAmountPreposition.show()}},A=function(){var a=e.trim(t.bulkPriceAction.find("option:selected").val()),i="free"===a?lpVars.i18n.make:t.bulkPriceAction.find("option:selected").text(),s=t.bulkPriceObjects.find("option:selected").text(),l="all"===e.trim(t.bulkPriceObjects.find("option:selected").val())?"":'"'+e.trim(t.bulkPriceObjectsCategory.find("option:selected").text())+'"',r="free"===e.trim(t.bulkPriceAction.find("option:selected").val())?"":t.bulkPriceChangeAmountPreposition.text(),o="free"===e.trim(t.bulkPriceAction.find("option:selected").val())?lpVars.i18n.free:"",n="free"===a||"reset"===a?"":t.bulkPriceChangeAmount.val()+t.bulkPriceChangeUnit.find("option:selected").text(),c=[i,s,l,r,n,o];c=e.trim(c.join(" ").replace(/\s+/g," ")),t.bulkPriceFormHiddenField.val("bulk_price_form_save"),t.bulkPriceOperationIdHiddenField.val(void 0),t.bulkPriceMessageHiddenField.val(c),e.post(ajaxurl,t.bulkPriceForm.serializeArray(),function(e){e.success&&L(e.data.id,e.data.message),t.navigation.showMessage(e)},"json")},L=function(e,a){var i='<p class="lp_bulk-operation" data-value="'+e+'"><a href="#" class="lp_js_deleteSavedBulkOperation lp_edit-link lp_delete-link" data-icon="g">'+lpVars.i18n.delete+'</a><a href="#" class="lp_js_applySavedBulkOperation button button-primary lp_m-l2">'+lpVars.i18n.updatePrices+'</a><span class="lp_bulk-operation__message">'+a+"</span></p>";t.bulkPriceForm.after(i)},W=function(e){t.bulkPriceFormHiddenField.val("bulk_price_form"),t.bulkPriceOperationIdHiddenField.val(e.data("value")),O()},U=function(a){t.bulkPriceFormHiddenField.val("bulk_price_form_delete"),t.bulkPriceOperationIdHiddenField.val(a.data("value")),a.velocity("fadeOut",{duration:250}),e.post(ajaxurl,t.bulkPriceForm.serializeArray(),function(e){e.success?a.remove():a.velocity("fadeIn",{duration:250}),t.navigation.showMessage(e)},"json")},H=function(a){var i=a.serialize();t.purchaseModeInput.prop("disabled",!0),e.post(ajaxurl,i,function(e){e.success||(t.navigation.showMessage(e),t.purchaseModeInput.prop("checked",!1))},"json"),t.purchaseModeInput.prop("disabled",!1)},R=function(e,t){var a;return function(){var i=this,s=arguments;clearTimeout(a),a=setTimeout(function(){e.apply(i,s)},t)}},B=function(){a(),t.bulkPriceAction.change()};B()}t()})}(jQuery);