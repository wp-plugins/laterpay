!function(e){e(function(){function s(){var s={revenueModel:".lp_js_revenueModel",revenueModelLabel:".lp_js_revenueModelLabel",revenueModelLabelDisplay:".lp_js_revenueModelLabelDisplay",revenueModelInput:".lp_js_revenueModelInput",priceInput:".lp_js_priceInput",purchaseModeForm:e("#lp_js_changePurchaseModeForm"),purchaseModeInput:e(".lp_js_onlyTimePassPurchaseModeInput"),timePassOnlyHideElements:e(".lp_js_hideInTimePassOnlyMode"),globalDefaultPriceForm:e("#lp_js_globalDefaultPriceForm"),globalDefaultPriceInput:e("#lp_js_globalDefaultPrice"),globalDefaultPriceDisplay:e("#lp_js_globalDefaultPriceText"),globalDefaultPriceRevenueModelDisplay:e("#lp_js_globalDefaultPriceRevenueModelLabel"),editGlobalDefaultPrice:e("#lp_js_editGlobalDefaultPrice"),cancelEditingGlobalDefaultPrice:e("#lp_js_cancelEditingGlobalDefaultPrice"),saveGlobalDefaultPrice:e("#lp_js_saveGlobalDefaultPrice"),globalDefaultPriceShowElements:e("#lp_js_globalDefaultPriceText,#lp_js_editGlobalDefaultPrice,#lp_js_globalDefaultPriceRevenueModelLabel"),globalDefaultPriceEditElements:e("#lp_js_globalDefaultPrice,#lp_js_globalDefaultPriceRevenueModel,#lp_js_cancelEditingGlobalDefaultPrice,#lp_js_saveGlobalDefaultPrice"),categoryDefaultPrices:e("#lp_js_categoryDefaultPriceList"),addCategory:e("#lp_js_addCategoryDefaultPrice"),categoryDefaultPriceTemplate:e("#lp_js_categoryDefaultPriceTemplate"),categoryDefaultPriceForm:".lp_js_categoryDefaultPriceForm",editCategoryDefaultPrice:".lp_js_editCategoryDefaultPrice",cancelEditingCategoryDefaultPrice:".lp_js_cancelEditingCategoryDefaultPrice",saveCategoryDefaultPrice:".lp_js_saveCategoryDefaultPrice",deleteCategoryDefaultPrice:".lp_js_deleteCategoryDefaultPrice",categoryDefaultPriceShowElements:".lp_js_categoryDefaultPriceCategoryTitle,.lp_js_revenueModelLabelDisplay,.lp_js_categoryDefaultPriceDisplay,.lp_js_editCategoryDefaultPrice,.lp_js_deleteCategoryDefaultPrice",categoryDefaultPriceEditElements:".lp_js_categoryDefaultPriceInput,.lp_js_revenueModel,.lp_js_saveCategoryDefaultPrice,.lp_js_cancelEditingCategoryDefaultPrice",categoryTitle:".lp_js_categoryDefaultPriceCategoryTitle",categoryDefaultPriceDisplay:".lp_js_categoryDefaultPriceDisplay",selectCategory:".lp_js_selectCategory",categoryDefaultPriceInput:".lp_js_categoryDefaultPriceInput",categoryId:".lp_js_categoryDefaultPriceCategoryId",addTimePass:e("#lp_js_addTimePass"),timePassEditor:e(".lp_js_timePassEditor"),timePassTemplate:e("#lp_js_timePassTemplate"),timePassWrapper:".lp_js_timePassWrapper",timePassFormTemplate:e("#lp_js_timePassFormTemplate"),timePassFormId:"lp_js_timePassForm",timePassForm:".lp_js_timePassEditorForm",timePassDuration:".lp_js_switchTimePassDuration",timePassDurationClass:"lp_js_switchTimePassDuration",timePassPeriod:".lp_js_switchTimePassPeriod",timePassPeriodClass:"lp_js_switchTimePassPeriod",timePassScope:".lp_js_switchTimePassScope",timePassScopeClass:"lp_js_switchTimePassScope",timePassScopeCategory:".lp_js_switchTimePassScopeCategory",timePassScopeCategoryClass:"lp_js_switchTimePassScopeCategory",timePassCategoryId:".lp_js_timePassCategoryId",timePassCategoryWrapper:".lp_js_timePassCategoryWrapper",timePassTitle:".lp_js_timePassTitleInput",timePassTitleClass:"lp_js_timePassTitleInput",timePassPrice:".lp_js_timePassPriceInput",timePassPriceClass:"lp_js_timePassPriceInput",timePassRevenueModel:".lp_js_timePassRevenueModelInput",timePassDescription:".lp_js_timePassDescriptionTextarea",timePassDescriptionClass:"lp_js_timePassDescriptionTextarea",timePassPreviewTitle:".lp_js_timePassPreviewTitle",timePassPreviewDescription:".lp_js_timePassPreviewDescription",timePassPreviewValidity:".lp_js_timePassPreviewValidity",timePassPreviewAccess:".lp_js_timePassPreviewAccess",timePassPreviewPrice:".lp_js_timePassPreviewPrice",timePass:".lp_js_timePass",timePassId:".lp_js_timePassId",landingPageInput:".lp_js_landingPageInput",landingPageSave:"#lp_js_landingPageSave",landingPageForm:e("#lp_js_landingPageForm"),voucherPriceInput:".lp_js_voucherPriceInput",generateVoucherCode:".lp_js_generateVoucherCode",voucherDeleteLink:".lp_js_deleteVoucher",voucherEditor:".lp_js_voucherEditor",voucherHiddenPassId:"#lp_js_timePassEditorHiddenPassId",voucherPlaceholder:".lp_js_voucherPlaceholder",voucherList:".lp_js_voucherList",voucher:".lp_js_voucher",voucherTimesRedeemed:".lp_js_voucherTimesRedeemed",bulkPriceForm:e("#lp_js_bulkPriceEditorForm"),bulkPriceFormHiddenField:e("#lp_js_bulkPriceEditorHiddenFormInput"),bulkPriceOperationIdHiddenField:e("#lp_js_bulkPriceEditorHiddenIdInput"),bulkPriceMessageHiddenField:e("#lp_js_bulkPriceEditorHiddenMessageInput"),bulkPriceAction:e("#lp_js_selectBulkAction"),bulkPriceObjects:e("#lp_js_selectBulkObjects"),bulkPriceObjectsCategory:e("#lp_js_selectBulkObjectsCategory"),bulkPriceObjectsCategoryWithPrice:e("#lp_js_selectBulkObjectsCategoryWithPrice"),bulkPriceChangeAmountPreposition:e("#lp_js_bulkPriceEditorAmountPreposition"),bulkPriceChangeAmount:e("#lp_js_setBulkChangeAmount"),bulkPriceChangeUnit:e("#lp_js_selectBulkChangeUnit"),bulkPriceSubmit:e("#lp_js_applyBulkOperation"),bulkSaveOperationLink:e("#lp_js_saveBulkOperation"),bulkDeleteOperationLink:".lp_js_deleteSavedBulkOperation",bulkApplySavedOperationLink:".lp_js_applySavedBulkOperation",editing:"lp_is-editing",unsaved:"lp_is-unsaved",payPerUse:"ppu",singleSale:"sis",selected:"lp_is-selected",disabled:"lp_is-disabled",hidden:"lp_hidden"},a=function(){e("body").on("change",s.revenueModelInput,function(){t(e(this).parents("form"))}),e("body").on("keyup",s.priceInput,R(function(){t(e(this).parents("form"))},800)),s.purchaseModeInput.on("change",function(){H(s.purchaseModeForm)}),s.editGlobalDefaultPrice.mousedown(function(){l()}).click(function(e){e.preventDefault()}),s.cancelEditingGlobalDefaultPrice.mousedown(function(){r()}).click(function(e){e.preventDefault()}),s.saveGlobalDefaultPrice.mousedown(function(){o()}).click(function(e){e.preventDefault()}),s.addCategory.mousedown(function(){n()}).click(function(e){e.preventDefault()}),s.categoryDefaultPrices.on("click",s.editCategoryDefaultPrice,function(){var a=e(this).parents(s.categoryDefaultPriceForm);c(a)}),s.categoryDefaultPrices.on("click",s.cancelEditingCategoryDefaultPrice,function(){var a=e(this).parents(s.categoryDefaultPriceForm);u(a)}),s.categoryDefaultPrices.on("click",s.saveCategoryDefaultPrice,function(){var a=e(this).parents(s.categoryDefaultPriceForm);p(a)}),s.categoryDefaultPrices.on("click",s.deleteCategoryDefaultPrice,function(){var a=e(this).parents(s.categoryDefaultPriceForm);d(a)}),s.addTimePass.mousedown(function(){f()}).click(function(e){e.preventDefault()}),s.timePassEditor.on("mousedown",".lp_js_editTimePass",function(){v(e(this).parents(s.timePassWrapper))}).on("click",".lp_js_editTimePass",function(e){e.preventDefault()}),s.timePassEditor.on("change",s.timePassRevenueModel,function(){C(e(this).parents("form"))}),s.timePassEditor.on("change",s.timePassDuration,function(){h(e(this).parents(s.timePassWrapper),e(this))}),s.timePassEditor.on("change",s.timePassPeriod,function(){h(e(this).parents(s.timePassWrapper),e(this))}),s.timePassEditor.on("change",s.timePassScope,function(){k(e(this)),h(e(this).parents(s.timePassWrapper),e(this))}),s.timePassEditor.on("change",s.timePassScopeCategory,function(){h(e(this).parents(s.timePassWrapper),e(this))}),s.timePassEditor.on("input",[s.timePassTitle,s.timePassDescription].join(),function(){h(e(this).parents(s.timePassWrapper),e(this))}),s.timePassEditor.on("keyup",s.timePassPrice,R(function(){t(e(this).parents("form"),!1,e(this)),h(e(this).parents(s.timePassWrapper),e(this))},800)),s.timePassEditor.on("click",".lp_js_cancelEditingTimePass",function(a){b(e(this).parents(s.timePassWrapper)),a.preventDefault()}),s.timePassEditor.on("click",".lp_js_saveTimePass",function(a){j(e(this).parents(s.timePassWrapper)),a.preventDefault()}),s.timePassEditor.on("click",".lp_js_deleteTimePass",function(a){y(e(this).parents(s.timePassWrapper)),a.preventDefault()}),s.timePassEditor.on("mousedown",".lp_js_flipTimePass",function(){D(this)}).on("click",".lp_js_flipTimePass",function(e){e.preventDefault()}),s.timePassEditor.on("keyup",s.voucherPriceInput,R(function(){t(e(this).parents("form"),!0,e(this))},800)),s.timePassEditor.on("mousedown",s.generateVoucherCode,function(){T(e(this).parents(s.timePassWrapper))}).on("click",s.generateVoucherCode,function(e){e.preventDefault()}),s.timePassEditor.on("click",s.voucherDeleteLink,function(s){E(e(this).parent()),s.preventDefault()}),s.landingPageForm.on("click",s.landingPageSave,function(e){x(s.landingPageForm),e.preventDefault()}),s.bulkPriceAction.add(s.bulkPriceObjects).on("change",function(){S(s.bulkPriceAction.val(),s.bulkPriceObjects.val())}),s.bulkPriceObjectsCategoryWithPrice.on("change",function(){s.bulkPriceChangeAmountPreposition.text(lpVars.i18n.toCategoryDefaultPrice+" "+s.bulkPriceObjectsCategoryWithPrice.find(":selected").attr("data-price")+" "+lpVars.defaultCurrency)}),s.bulkPriceForm.on("submit",function(e){s.bulkPriceFormHiddenField.val("bulk_price_form"),s.bulkPriceOperationIdHiddenField.val(void 0),s.bulkPriceMessageHiddenField.val(void 0),O(),e.preventDefault()}),s.bulkSaveOperationLink.mousedown(function(){V()}).click(function(e){e.preventDefault()}),e("body").on("mousedown",s.bulkApplySavedOperationLink,function(){L(e(this).parent())}).on("click",s.bulkApplySavedOperationLink,function(e){e.preventDefault()}),e("body").on("mousedown",s.bulkDeleteOperationLink,function(){W(e(this).parent())}).on("click",s.bulkDeleteOperationLink,function(e){e.preventDefault()})},t=function(s,a,t){var l=t?t:e(".lp_number-input",s),r=l.val();return r=r.replace(/[^0-9\,\.]/g,""),r=r.indexOf(",")>-1?parseFloat(r.replace(",",".")).toFixed(2):parseFloat(r).toFixed(2),isNaN(r)&&(r=0),r=Math.abs(r),r>149.99?r=149.99:r>0&&.05>r&&(r=.05),a||i(r,s),r=r.toFixed(2),"de_DE"===lpVars.locale&&(r=r.replace(".",",")),l.val(r),r},i=function(a,t){var i;if(t.hasClass("lp_js_timePassEditorForm")){var l=e(s.timePassRevenueModel,t),r=l.prop("checked");i=r?s.singleSale:s.payPerUse,a>5&&i===s.payPerUse?l.prop("checked",!0):1.49>a&&i===s.singleSale&&l.prop("checked",!1)}else{var o=e(".lp_js_revenueModelInput[value="+s.payPerUse+"]",t),n=e(".lp_js_revenueModelInput[value="+s.singleSale+"]",t);i=e("input:radio:checked",t).val(),0===a||a>=.05&&5>=a?o.removeProp("disabled").parent("label").removeClass(s.disabled):o.prop("disabled","disabled").parent("label").addClass(s.disabled),a>=1.49?n.removeProp("disabled").parent("label").removeClass(s.disabled):n.prop("disabled","disabled").parent("label").addClass(s.disabled),a>5&&i===s.payPerUse?n.prop("checked","checked"):1.49>a&&i===s.singleSale&&o.prop("checked","checked"),e("label",t).removeClass(s.selected),e(".lp_js_revenueModelInput:checked",t).parent("label").addClass(s.selected)}},l=function(){s.globalDefaultPriceShowElements.hide(),s.globalDefaultPriceEditElements.show(0,function(){setTimeout(function(){s.globalDefaultPriceInput.val(s.globalDefaultPriceDisplay.text()).focus()},50)}),s.globalDefaultPriceForm.addClass(s.editing)},r=function(){s.globalDefaultPriceShowElements.show(),s.globalDefaultPriceEditElements.hide(),s.globalDefaultPriceForm.removeClass(s.editing),s.globalDefaultPriceInput.val(s.globalDefaultPriceDisplay.text());var a=s.globalDefaultPriceRevenueModelDisplay.text().toLowerCase();e(s.revenueModelLabel,s.globalDefaultPriceForm).removeClass(s.selected),e(".lp_js_revenueModelInput[value="+a+"]",s.globalDefaultPriceForm).prop("checked","checked").parent("label").addClass(s.selected)},o=function(){var a=t(s.globalDefaultPriceForm);s.globalDefaultPriceInput.val(a),e.post(ajaxurl,s.globalDefaultPriceForm.serializeArray(),function(e){e.success&&(s.globalDefaultPriceDisplay.html(e.laterpay_global_price),s.globalDefaultPriceRevenueModelDisplay.text(e.laterpay_price_revenue_model)),setMessage(e.message,e.success),r()},"json")},n=function(){s.addCategory.fadeOut(250);var e=s.categoryDefaultPriceTemplate.clone().removeAttr("id").appendTo("#lp_js_categoryDefaultPriceList").fadeIn(250);c(e)},c=function(a){e(".lp_js_categoryDefaultPriceForm.lp_is-editing").each(function(){u(e(this),!0)}),a.addClass(s.editing),e(s.categoryDefaultPriceShowElements,a).hide(),s.addCategory.fadeOut(250),e(s.categoryDefaultPriceEditElements,a).show(),_(a,s.selectCategory,"laterpay_get_categories_with_price",P)},p=function(a){var i=t(a);e(s.categoryDefaultPriceInput,a).val(i),e.post(ajaxurl,a.serializeArray(),function(t){t.success&&(e(s.categoryDefaultPriceDisplay,a).text(t.price),e(s.revenueModelLabelDisplay,a).text(t.revenue_model),e(s.categoryDefaultPriceInput,a).val(t.price),e(s.categoryTitle,a).text(t.category),e(s.categoryId,a).val(t.category_id),a.removeClass(s.unsaved)),u(a),setMessage(t.message,t.success)},"json")},u=function(a,t){if(a.removeClass(s.editing),a.hasClass(s.unsaved))a.fadeOut(250,function(){e(this).remove()});else{e(s.categoryDefaultPriceEditElements,a).hide(),e(s.selectCategory,a).select2("destroy"),e(s.categoryDefaultPriceInput,a).val(e(s.categoryDefaultPriceDisplay,a).text());var i=e(s.revenueModelLabelDisplay,a).text().toLowerCase();e(s.revenueModelLabel,a).removeClass(s.selected),e(".lp_js_revenueModelInput[value="+i+"]",a).prop("checked","checked").parent("label").addClass(s.selected),e(s.categoryDefaultPriceShowElements,a).show()}t||s.addCategory.fadeIn(250)},d=function(s){e("input[name=form]",s).val("price_category_form_delete"),e.post(ajaxurl,s.serializeArray(),function(a){a.success&&s.fadeOut(400,function(){e(this).remove()}),setMessage(a.message,a.success)},"json")},P=function(s,a){var t=e(a).parent().parent().parent();return e(".lp_js_selectCategory",t).val(s.text),e(".lp_js_categoryDefaultPriceCategoryId",t).val(s.id),s.text},m=function(a,t){var i=e(t).parents("form");return a.id&&e(s.timePassCategoryId,i).val(a.id),e(s.timePassScopeCategory,i).val(a.text),a.text},_=function(s,a,t,i){e(a,s).select2({allowClear:!0,ajax:{url:ajaxurl,data:function(e){return{form:t,term:e,action:"laterpay_pricing"}},results:function(s){var a=[];return e.each(s,function(e){var t=s[e];a.push({id:t.term_id,text:t.name})}),{results:a}},dataType:"json",type:"POST"},initSelection:function(s,a){var i=e(s).val();if(""!==i){var l={text:i};a(l)}else e.post(ajaxurl,{form:t,term:"",action:"laterpay_pricing"},function(e){if(e&&void 0!==e[0]){var s=e[0];a({id:s.term_id,text:s.name})}})},formatResult:function(e){return e.text},formatSelection:i,escapeMarkup:function(e){return e}})},f=function(){s.addTimePass.fadeOut(250),s.timePassEditor.prepend(s.timePassTemplate.clone().removeAttr("id"));var a=e(".lp_js_timePassWrapper",s.timePassEditor).first();e(s.timePassForm,a).attr("id",s.timePassFormId).addClass(s.unsaved),g(a),a.slideDown(250,function(){e(this).removeClass("lp_hidden")}).find(s.timePassForm).slideDown(250,function(){e(this).removeClass("lp_hidden")})},v=function(a){var t=s.timePassFormTemplate.clone().attr("id",s.timePassFormId);e(".lp_js_timePassEditorContainer",a).html(t),g(a),e(".lp_js_editTimePass, .lp_js_deleteTimePass",a).addClass("lp_hidden"),e(".lp_js_saveTimePass, .lp_js_cancelEditingTimePass",a).removeClass("lp_hidden"),t.removeClass("lp_hidden")},g=function(a){var i=a.data("pass-id"),l=lpVars.time_passes_list[i],r=lpVars.vouchers_list[i],o=e(s.timePassRevenueModel,a),n="";if(l){e("input, select, textarea",a).each(function(s,t){n=e(t,a).attr("name"),""!==n&&void 0!==l[n]&&"revenue_model"!==n&&e(t,a).val(l[n])}),t(a.find("form"),!1,e(s.timePassPrice,a)),e(s.voucherPriceInput,a).val(e(s.timePassPrice,a).val()),l.revenue_model===s.singleSale&&o.prop("checked",!0),e(s.timePassCategoryWrapper,a).hide(),_(a,s.timePassScopeCategory,"laterpay_get_categories",m);var c=e(s.timePassScope,a).find("option:selected");"0"!==c.val()&&e(s.timePassCategoryWrapper,a).show(),I(a),r instanceof Object&&e.each(r,function(e,s){w(e,s,a)})}},h=function(a,t){var i=""!==t.val()?t.val():" ";if(t.hasClass(s.timePassDurationClass)||t.hasClass(s.timePassPeriodClass)){var l=e(s.timePassDuration,a).val(),r=e(s.timePassPeriod,a).find("option:selected").text();r=parseInt(l,10)>1?r+"s":r,i=l+" "+r,e(s.timePassPreviewValidity,a).text(i)}else if(t.hasClass(s.timePassScopeClass)||t.hasClass(s.timePassScopeCategoryClass)){var o=e(s.timePassScope,a).find("option:selected");i=o.text(),"0"!==o.val()&&(i+=" "+e(s.timePassScopeCategory,a).val()),e(s.timePassPreviewAccess,a).text(i)}else t.hasClass(s.timePassPriceClass)?(e(".lp_js_purchaseLink",a).html(i+'<small class="lp_purchase-link__currency">'+lpVars.defaultCurrency+"</small>"),e(s.timePassPreviewPrice).text(i+" "+lpVars.defaultCurrency)):t.hasClass(s.timePassTitleClass)?e(s.timePassPreviewTitle,a).text(i):t.hasClass(s.timePassDescriptionClass)&&e(s.timePassPreviewDescription,a).text(i)},b=function(a){var t=a.find(s.timePass).data("pass-id");e(s.timePassForm,a).hasClass(s.unsaved)?a.fadeOut(250,function(){e(this).remove()}):e(s.timePassForm,a).fadeOut(250,function(){e(this).remove()}),e(".lp_js_editTimePass, .lp_js_deleteTimePass",a).removeClass("lp_hidden"),e(".lp_js_saveTimePass, .lp_js_cancelEditingTimePass",a).addClass("lp_hidden"),I(a),lpVars.vouchers_list[t]instanceof Object&&(e.each(lpVars.vouchers_list[t],function(e,s){F(e,s,a)}),a.find(s.voucherList).show()),s.addTimePass.is(":hidden")&&s.addTimePass.fadeIn(250)},j=function(a){e.post(ajaxurl,e(s.timePassForm,a).serializeArray(),function(t){if(t.success){var i=t.data.pass_id;if(lpVars.vouchers_list[i]=t.vouchers,lpVars.time_passes_list[i])lpVars.time_passes_list[i]=t.data,e(".lp_js_timePassPreview",a).html(t.html),e(".lp_js_saveTimePass, .lp_js_cancelEditingTimePass",a).addClass("lp_hidden"),e(".lp_js_editTimePass, .lp_js_deleteTimePass",a).removeClass("lp_hidden"),e(s.timePassForm,a).fadeOut(250,function(){e(this).remove(),I(a),lpVars.vouchers_list[i]instanceof Object&&(e.each(lpVars.vouchers_list[i],function(e,s){F(e,s,a)}),a.find(s.voucherList).show())});else{lpVars.time_passes_list[i]=t.data;var l=s.timePassTemplate.clone().removeAttr("id").data("pass-id",i);e(s.timePassId,l).text(i).parent().show(250),e(".lp_js_timePassPreview",l).html(t.html),e(s.timePassForm,a).remove(),s.addTimePass.after(l),g(l),e(".lp_js_saveTimePass, .lp_js_cancelEditingTimePass",l).addClass("lp_hidden"),e(".lp_js_editTimePass, .lp_js_deleteTimePass",l).removeClass("lp_hidden"),a.fadeOut(250,function(){e(this).remove(),I(l),lpVars.vouchers_list[i]instanceof Object&&(e.each(lpVars.vouchers_list[i],function(e,s){F(e,s,l)}),l.find(s.voucherList).show()),l.removeClass("lp_hidden")})}}s.addTimePass.is(":hidden")&&s.addTimePass.fadeIn(250),setMessage(t.message,t.success)},"json")},y=function(s){confirm(lpVars.i18n.confirmDeleteTimePass)&&s.slideUp({duration:250,start:function(){e.post(ajaxurl,{action:"laterpay_pricing",form:"time_pass_delete",pass_id:s.data("pass-id")},function(s){s.success?e(this).remove():e(this).stop().show(),setMessage(s.message,s.success)},"json")}})},D=function(s){e(s).parents(".lp_time-pass").toggleClass("lp_is-flipped")},k=function(a){var t=e("option:selected",a).val();"0"===t?e(s.timePassCategoryWrapper).hide():e(s.timePassCategoryWrapper).show()},C=function(a){t(a,!1,e(s.timePassPrice,a))},T=function(a){e.post(ajaxurl,{form:"generate_voucher_code",action:"laterpay_pricing",price:a.find(s.voucherPriceInput).val()},function(e){e.success?w(e.code,a.find(s.voucherPriceInput).val(),a):setMessage(e.message,e.success)})},w=function(e,a,t){var i=a+" "+lpVars.defaultCurrency,l='<div class="lp_js_voucher lp_voucher" data-code="'+e+'" style="display:none;"><input type="hidden" name="voucher[]" value="'+e+"|"+a+'"><span class="lp_voucher__code">'+e+'</span> <span class="lp_voucher__code-infos">'+lpVars.i18n.voucherText+" "+i+'</span><a href="#" class="lp_js_deleteVoucher lp_edit-link lp_delete-link" data-icon="g">'+lpVars.i18n.delete+"</a></div>";t.find(s.voucherPlaceholder).prepend(l).find("div").first().slideDown(250)},F=function(e,a,t){var i=t.data("pass-id"),l=lpVars.vouchers_statistic[i]?lpVars.vouchers_statistic[i]:0,r=a+" "+lpVars.defaultCurrency,o='<div class="lp_js_voucher lp_voucher" data-code="'+e+'"><span class="lp_voucher__code">'+e+'</span><span class="lp_voucher__code-infos">'+lpVars.i18n.voucherText+" "+r+'.<br><span class="lp_js_voucherTimesRedeemed">'+l+"</span> "+lpVars.i18n.timesRedeemed+"</span></div>";t.find(s.voucherList).append(o)},I=function(e){e.find(s.voucher).remove()},E=function(s){s.slideUp(250,function(){e(this).remove()})},x=function(s){e.post(ajaxurl,s.serializeArray(),function(e){setMessage(e)})},O=function(a){e.post(ajaxurl,a||s.bulkPriceForm.serializeArray(),function(e){setMessage(e.message,e.success)},"json")},M=function(a){s.bulkPriceObjects.removeClass(s.disabled).append(e("<option>",{value:"in_category",text:lpVars.inCategoryLabel,selected:!!a}))},S=function(a,t){var i="in_category"===t;switch(s.bulkPriceChangeUnit.find("option").each(function(){"%"===e(this).text()&&e(this).remove()}).end().addClass(s.disabled),s.bulkPriceObjects.find("option").each(function(){"in_category"===e(this).val()&&(e(this).remove(),s.bulkPriceObjects.addClass(s.disabled))}),s.bulkPriceObjectsCategory.prop("disabled",!0).hide(),s.bulkPriceObjectsCategoryWithPrice.prop("disabled",!0).hide(),s.bulkPriceChangeAmountPreposition.hide(),s.bulkPriceChangeAmount.prop("disabled",!0).hide(),s.bulkPriceChangeUnit.prop("disabled",!0).hide(),a){case"set":s.bulkPriceChangeAmountPreposition.show().text(lpVars.i18n.to),s.bulkPriceChangeAmount.prop("disabled",!1).show(),s.bulkPriceChangeUnit.show();break;case"increase":case"reduce":s.bulkPriceChangeAmountPreposition.show().text(lpVars.i18n.by),s.bulkPriceChangeAmount.prop("disabled",!1).show(),s.bulkPriceChangeUnit.prop("disabled",!1).show(),s.bulkPriceChangeUnit.removeClass(s.disabled).append(e("<option>",{value:"percent",text:"%"}));break;case"free":s.bulkPriceObjectsCategory.length&&(M(i),i&&s.bulkPriceObjectsCategory.prop("disabled",!1).show());break;case"reset":s.bulkPriceChangeAmountPreposition.text(lpVars.i18n.toGlobalDefaultPrice+" "+lpVars.globalDefaultPrice+" "+lpVars.defaultCurrency),s.bulkPriceObjectsCategoryWithPrice.length&&(M(i),i&&s.bulkPriceObjectsCategoryWithPrice.prop("disabled",!1).show().change()),s.bulkPriceChangeAmountPreposition.show()}},V=function(){var a=e.trim(s.bulkPriceAction.find("option:selected").val()),t="free"===a?lpVars.i18n.make:s.bulkPriceAction.find("option:selected").text(),i=s.bulkPriceObjects.find("option:selected").text(),l="all"===e.trim(s.bulkPriceObjects.find("option:selected").val())?"":'"'+e.trim(s.bulkPriceObjectsCategory.find("option:selected").text())+'"',r="free"===e.trim(s.bulkPriceAction.find("option:selected").val())?"":s.bulkPriceChangeAmountPreposition.text(),o="free"===e.trim(s.bulkPriceAction.find("option:selected").val())?lpVars.i18n.free:"",n="free"===a||"reset"===a?"":s.bulkPriceChangeAmount.val()+s.bulkPriceChangeUnit.find("option:selected").text(),c=[t,i,l,r,n,o];c=e.trim(c.join(" ").replace(/\s+/g," ")),s.bulkPriceFormHiddenField.val("bulk_price_form_save"),s.bulkPriceOperationIdHiddenField.val(void 0),s.bulkPriceMessageHiddenField.val(c),e.post(ajaxurl,s.bulkPriceForm.serializeArray(),function(e){e.success&&A(e.data.id,e.data.message),setMessage(e.message,e.success)},"json")},A=function(e,a){var t='<p class="lp_bulk-operation" data-value="'+e+'"><a href="#" class="lp_js_deleteSavedBulkOperation lp_edit-link lp_delete-link" data-icon="g">'+lpVars.i18n.delete+'</a><a href="#" class="lp_js_applySavedBulkOperation button button-primary lp_m-l2">'+lpVars.i18n.updatePrices+'</a><span class="lp_bulk-operation__message">'+a+"</span></p>";s.bulkPriceForm.after(t)},L=function(e){s.bulkPriceFormHiddenField.val("bulk_price_form"),s.bulkPriceOperationIdHiddenField.val(e.data("value")),O()},W=function(a){s.bulkPriceFormHiddenField.val("bulk_price_form_delete"),s.bulkPriceOperationIdHiddenField.val(a.data("value")),a.fadeOut(250),e.post(ajaxurl,s.bulkPriceForm.serializeArray(),function(e){e.success?a.remove():a.fadeIn(250),setMessage(e.message,e.success)},"json")},H=function(a){var t=s.purchaseModeInput.is(":checked");e.post(ajaxurl,a.serialize(),function(e){e.success?t?s.timePassOnlyHideElements.slideUp():s.timePassOnlyHideElements.slideDown():(setMessage(e.message,e.success),s.purchaseModeInput.attr("checked",!1))},"json")},R=function(e,s){var a;return function(){var t=this,i=arguments;clearTimeout(a),a=setTimeout(function(){e.apply(t,i)},s)}},U=function(){a(),s.bulkPriceAction.change()};U()}s()})}(jQuery);