!function(a){a(function(){function o(){var o={timepassDiagram:a(".lp_js_timepassDiagram"),colorBackground:"#e3e3e3",colorBackgroundLaterpay:"#50c371",colorBorder:"#ccc",colorTextLighter:"#ababab"},t={legend:{show:!1},xaxis:{font:{color:o.colorTextLighter,lineHeight:18},show:!0},yaxis:{font:{color:o.colorTextLighter},min:0,reserveSpace:!0,ticks:5},series:{shadowSize:0},grid:{borderWidth:{top:0,right:0,bottom:1,left:0},borderColor:o.colorBorder,tickColor:"rgba(247,247,247,0)"}},e=function(o){var t,e={action:"laterpay_get_time_passes_data",_wpnonce:lpVars.nonces.time_passes,pass_id:o};return t=a.ajax({url:lpVars.ajaxUrl,async:!0,method:"POST",data:e}),t.done(function(o){o&&!o.success&&a(".lp_navigation").showMessage(o)}),t},r=function(e,r){var i=parseInt(lpVars.maxYValue,10),l=Math.max(i,10)+4,s=[{color:o.colorBorder,lineWidth:1,xaxis:{from:3.5,to:3.5}},{color:o.colorBorder,lineWidth:1,xaxis:{from:11.5,to:11.5}},{color:o.colorBorder,lineWidth:2,xaxis:{from:.25,to:3.25},yaxis:{from:l-2,to:l-2}},{color:o.colorBorder,lineWidth:2,xaxis:{from:3.75,to:11.25},yaxis:{from:l-2,to:l-2}}],n={xaxis:{ticks:e.data.x},yaxis:{show:!1,max:l,tickFormatter:function(a){return parseInt(a,10)}},grid:{markings:s}},p=[{data:e.data.y,bars:{align:"center",barWidth:.4,fillColor:o.colorBackgroundLaterpay,horizontal:!1,lineWidth:0,show:!0}}];n=a.extend(!0,{},t,n);var d,c=a.plot(r,p,n),f=0,x=0;for(d=0;5>d;d++)f+=e.data.y[d][1];for(d=5;13>d;d++)x+=e.data.y[d][1];var m=c.pointOffset({x:3.5,y:0}),g='<div class="lp_time-pass-diagram__label" style="left:'+(m.left-30)+'px; top:2px;">'+lpVars.i18n.endingIn+"<br>< 1 "+lpVars.i18n.month+"</div>";r.append(g);var v=c.pointOffset({x:11.5,y:0}),h='<div class="lp_time-pass-diagram__label" style="left:'+(v.left-30)+'px; top:2px;">'+lpVars.i18n.endingIn+"<br>< 3 "+lpVars.i18n.months+"</div>";r.append(h);var _=c.pointOffset({x:13,y:0}),y=c.getCanvas().getContext("2d");_.left+=8,_.top+=4,y.beginPath(),y.moveTo(_.left,_.top),y.lineTo(_.left,_.top-7),y.lineTo(_.left+6,_.top-3.5),y.lineTo(_.left,_.top),y.fillStyle=o.colorBorder,y.fill();var u='<div class="lp_time-pass-diagram__label" style="left:'+(_.left+10)+"px; top:"+(_.top-2)+'px;">'+lpVars.i18n.weeksLeft+"</div>";r.append(u);var b=c.pointOffset({x:1.5,y:l-2}),w='<div class="lp_time-pass-diagram__sum" style="left:'+(b.left-30)+"px; top:"+(b.top-14)+'px;">'+f+"</div>";r.append(w);var B=c.pointOffset({x:7.5,y:l-2}),k='<div class="lp_time-pass-diagram__sum" style="left:'+(B.left-30)+"px; top:"+(B.top-14)+'px;">'+x+"</div>";r.append(k)},i=function(){var t=o.timepassDiagram;a.each(o.timepassDiagram,function(o){var i=a(t[o]),l=i.data("id");i.showLoadingIndicator(),e(l).done(function(a){r(a,i)}).always(function(){i.removeLoadingIndicator()})})},l=function(){i()};l()}o()})}(jQuery);