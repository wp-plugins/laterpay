!function(e){e(function(){function t(){var t={browscapCacheUpdateButton:e("#lp_js_updateBrowscapCache"),statusHintText:e("#lp_js_updateBrowscapCache").next(".lp_appended-text"),laterpayApiFallbackSelect:e("#lp_js_laterpayApiFallbackSelect"),spinnerWrapper:e('<span id="lp_js_spinnerWrapper">'),spinnerWrapperSelector:"#lp_js_spinnerWrapper",flashMessageTimeout:800,requestSent:!1},a=function(){t.browscapCacheUpdateButton.mousedown(function(){n()}).click(function(e){e.preventDefault()}),t.laterpayApiFallbackSelect.change(function(){p(e(this))})},n=function(){confirm(lpVars.i18nconfirmTechnicalRequirementsForBrowscapUpdate)&&(t.requestSent||(t.requestSent=!0,t.statusHintText.text(lpVars.i18nFetchingUpdate),t.statusHintText.before(t.spinnerWrapper),e(t.spinnerWrapperSelector).showLoadingIndicator(),e.post(ajaxurl,{action:"laterpay_backend_options",form:"update_browscap_cache"},function(e){e.success?(t.browscapCacheUpdateButton.prop("disabled",!0),t.statusHintText.text(lpVars.i18nUpToDate)):t.statusHintText.text(e.message)},"json").fail(function(){t.browscapCacheUpdateButton.prop("disabled",!1),t.statusHintText.text(lpVars.i18nUpdateFailed)}).always(function(){t.requestSent=!1,e(t.spinnerWrapperSelector).remove()})))},p=function(e){var a=t.laterpayApiFallbackSelect.next("dfn"),n=e.val(),p="";void 0!==lpVars.laterpayApiOptions[n]&&(p=lpVars.laterpayApiOptions[n].description),a.html(p)},r=function(){a()};r()}t()})}(jQuery);